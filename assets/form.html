<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>The House Calculator</title>
</head>

<body>
<h1>House Calculator</h1>
<!--
  This section of the document specifies the table that will
  be used to display the list of birds and their description
 -->
<table>
  <tr>
    <th>Debt Name</th>
    <th>Debt Amount</th>
</table>
<br/>

<!--
  This section contains the form, that will be used to hit the
  `POST /debt` API that we will build in the next section
 -->
<form action="/debt" method="post">
  Debt1:
  <input type="text" name="Debt1">
  <br/> Debt2:
  <input type="text" name="Debt2">
  <br/> Debt3:
  <input type="text" name="Debt3">
  <br/> Debt4:
  <input type="text" name="Debt4">
  <br/> Debt5:
  <input type="text" name="Debt5">
  <br/><br/>
  <input type="submit" value="Submit">
</form>

<p id="total_debt"></p>
<!--
  Finally, the last section is the script that will
  run on each page load to fetch the list of debts
  and add them to our existing table
 -->
<script>
  fetch("/debt")
  .then((resp) => resp.json()).catch(e => {
    console.log(e);
  })
  .then(function(data){
    console.log(data)
    data.forEach(function(debt){
      console.log(debt)
      console.log(debt.total_debt)
      document.getElementById("total_debt").innerHTML = debt.total_debt
    })
  })
  //DebtTable = document.querySelector("table")

  /*
  Use the browsers `fetch` API to make a GET call to /debt
  We expect the response to be a JSON list of debts, of the
  form :
  [
    {"Debt1":"...","Debt1 description":"..."}
  ]
  */
</script>
</body>

</html>